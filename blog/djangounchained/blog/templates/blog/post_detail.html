{% extends 'blog/base.html' %}

{% block content %}
    <article class="media content-section">
        {% if post.author.profile.image %}
            <img class="rounded-circle article-img" src="{{ object.author.profile.image.url }}" alt="profile image">
        {% endif %}
        <div class="media-body">
            <div class="article-metadata" id="article-metadata">
                <div class="float-left">
                    <a class="mr-2" href="javascript:void(0)">{{ object.author }}</a>
                    <small class="text-muted">{{ object.date_posted | date:"F d, Y" }}</small>
                </div>
                {% if object.author == request.user %}
                    <div class="float-right" id="action-div">
                        <a href="{% url 'blog:post_update' object.id %}" class="btn btn-outline-info btn-sm mt-1 mb-1">Update</a>
                        <a href="{% url 'blog:post_delete' object.id %}"
                           class="btn btn-outline-danger btn-sm mt-1 mb-1">Delete</a>
                    </div>
                {% endif %}
                <div class="clearfix"></div>
            </div>
            <h2>{{ object.title }}</h2>
            <p class="article-content">{{ object.content }}</p>
        </div>
    </article>
{% endblock content %}

{% block javascripts %}
    <script>
        (function () {
            document.getElementById('article-metadata').addEventListener('mouseover', toggleActionDiv, false);
            document.getElementById('article-metadata').addEventListener('mouseleave', toggleActionDiv, false);
            document.getElementById('action-div').style.display = 'none';

            function toggleActionDiv(e) {
                if (e.type === 'mouseover') {
                    document.getElementById('action-div').style.display = 'block';
                } else {
                    document.getElementById('action-div').style.display = 'none';
                }
            }
        })();
    </script>
{% endblock %}
